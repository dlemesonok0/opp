# Флоу добавления задач

Ниже описан текстовый сценарий работы со схемами добавления задач, выбора ответственных и указания зависимостей.

## 1. Подготовка шаблона дела
1. Студент выбирает, работать ли с уже созданным шаблоном или начать новый.
   - Если шаблона ещё нет, система предлагает создать шаблон: студент вводит название и выбирает дело, система сохраняет шаблон и разворачивает список этапов для добавления задач.
   - Если шаблон существует, система показывает перечень шаблонов и после выбора раскрывает этапы выбранного дела.
2. Студент выбирает этап, на котором будет создана новая задача (при необходимости можно сначала выбрать или добавить шаблон задачи, чтобы использовать готовую структуру).

## 2. Создание задачи на этапе
1. Студент выбирает, создать задачу с нуля или на основе существующего шаблона задачи; система показывает список шаблонов или открывает пустую форму.
2. Студент вводит название задачи и тип/категорию, система проверяет обязательность названия.
3. Студент указывает этап: система фиксирует, к какому этапу дела будет прикреплена задача.
4. Студент добавляет описание задачи.
5. Студент задаёт параметры выполнения:
   - Дата и время начала (опционально) и дедлайн. Если дедлайн раньше текущего времени, система предупреждает и предлагает скорректировать.
   - Приоритет задачи и необходимые теги.
   - Напоминание: студент выбирает формат уведомлений и время срабатывания, система сохраняет настройки.
6. Студент прикрепляет файлы (документы, ссылки, медиа) через интерфейс добавления вложений.
7. Студент добавляет ответственных (см. раздел 4). Если ответственный не выбран, система на финальной проверке предложит вернуться и указать исполнителей.
8. Студент задаёт зависимости задач (см. раздел 5) и, при необходимости, время задержки между зависимыми задачами.

## 3. Сохранение задачи и шаблона
1. При сохранении система проверяет:
   - Заполнено ли обязательное название задачи. При отсутствии выводится ошибка и запрос на корректное заполнение.
   - Корректность дат: если дедлайн в прошлом, выводится предупреждение; если даты допустимы, проверка продолжается.
   - Наличие выбранных ответственных. При отсутствии система спрашивает, нужно ли вернуться и добавить исполнителей.
2. Если проверки пройдены, система создаёт запись задачи, добавляет её в список задач выбранного этапа и обновляет шаблон дела.
3. Система отображает уведомление об успешном создании задачи и возвращает пользователя к списку задач этапа.

## 4. Диаграмма активности: добавление ответственных
1. Пользователь нажимает «добавить ответственных».
2. Система уточняет, нужно выбрать всю команду или отдельных участников.
   - При выборе команды система просит подтверждение, затем сохраняет всю команду как исполнителей.
   - При выборе отдельных участников система показывает чекбокс-список участников.
3. Пользователь отмечает нужных участников, система сохраняет их как ответственных и возвращает к форме задачи.

## 5. Диаграмма активности: добавление зависимостей
1. Студент выбирает задачу-предшественника для связывания.
2. Выбирается тип зависимости и, при необходимости, задержка между задачами.
3. Студент отправляет данные в систему для фиксации зависимости.
4. Система проверяет, не образуется ли циклическая зависимость.
   - При выявлении цикла система выводит предупреждение и предлагает отменить или изменить настройку.
   - При отсутствии цикла система завершает операцию, обновляет реверсивную диаграмму Ганта, уведомляет ответственных о новой зависимости и предлагает сохранить изменения.
